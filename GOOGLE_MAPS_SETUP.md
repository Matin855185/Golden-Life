# راهنمای نقشه‌های Leaflet و Mapbox

## دو نقشه قدرتمند در یک سایت! 🗺️

حالا کاربران می‌توانند بین **Leaflet** و **Mapbox** انتخاب کنند.

### 🔄 Toggle Switch:
یک دکمه تغییر وضعیت زیبا برای انتخاب بین دو نقشه:
- **آیکون Leaflet**: 🍃 برگ سبز
- **آیکون Mapbox**: 🗺️ نقشه
- **انیمیشن طلایی**: مطابق تم سایت

### ✅ مزایای Leaflet:
- **رایگان**: بدون نیاز به API Key
- **سبک**: کتابخانه کوچک و سریع  
- **Open Source**: کد باز و قابل اعتماد
- **سفارشی**: طراحی کاملاً قابل تنظیم

### 🚀 مزایای Mapbox:
- **کیفیت بالا**: نقشه‌های وکتوری HD
- **سرعت**: رندرینگ سریع‌تر
- **استایل‌های متنوع**: تم‌های مختلف
- **3D Support**: قابلیت نمایش سه‌بعدی

### 🎨 ویژگی‌های مشترک:
- **تم تیره**: مطابق با طراحی Golden Life
- **مارکرهای سفارشی**: طلایی برای فروش، آبی برای اجاره
- **نمایش قیمت**: روی هر مارکر
- **Popup اطلاعات**: با کلیک روی مارکر
- **کنترل‌های طلایی**: zoom buttons با تم سایت

### 4. ویژگی‌های نقشه:
- **مرکز**: تهران (35.6892, 51.3890)
- **زوم**: 11
- **استایل**: تم تیره مطابق با طراحی سایت
- **مارکرها**: 
  - طلایی برای املاک فروشی
  - آبی برای املاک اجاره‌ای
- **InfoWindow**: نمایش اطلاعات ملک با کلیک روی مارکر

### 5. املاک نمونه:
- آپارتمان نیاوران (فروش)
- آپارتمان سعادت آباد (فروش)  
- آپارتمان شهرک غرب (فروش)
- آپارتمان زعفرانیه (اجاره)

### 🔧 **راهنمای تنظیم Mapbox:**

#### **1. دریافت API Token رایگان:**
1. به [Mapbox](https://www.mapbox.com/) بروید
2. ثبت‌نام کنید (رایگان)
3. به Dashboard بروید
4. Access Token خود را کپی کنید
5. در فایل `MapboxMap.js` جایگزین کنید:
```javascript
window.mapboxgl.accessToken = 'YOUR_MAPBOX_TOKEN';
```

#### **2. محدودیت‌های رایگان:**
- **50,000 بارگذاری** در ماه
- **بدون محدودیت** برای development
- **Token عمومی** فعلاً برای تست

### 🔧 **راهنمای استفاده:**

1. **انتخاب نقشه**: کلیک روی Leaflet یا Mapbox
2. **بارگذاری خودکار**: نقشه جدید لود می‌شود
3. **حفظ املاک**: مارکرها در هر دو نقشه
4. **تجربه یکسان**: popup ها و فیلترها
5. **Fallback هوشمند**: اگر Mapbox کار نکرد، به Leaflet برمی‌گردد

### 🛠️ **عیب‌یابی:**

#### **اگر Mapbox کار نمی‌کند:**
1. **کنسول مرورگر** را بررسی کنید
2. **اتصال اینترنت** را چک کنید
3. **API Token** را بررسی کنید
4. **خودکار به Leaflet** تغییر می‌دهد

#### **فایل‌های ایجاد شده:**
- ✅ `MapSection.js` - کامپوننت اصلی
- ✅ `MapboxMap.js` - کامپوننت جداگانه Mapbox
- ✅ Dynamic import - بدون مشکل SSR

### 🎯 **نتیجه:**
سیستم نقشه حالا کاملاً قابل اعتماد است با fallback هوشمند! 🚀✨
